<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Lich::Util::Magicinfo
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Lich::Util::Magicinfo";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (M)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Lich.html" title="Lich (module)">Lich</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Util.html" title="Lich::Util (module)">Util</a></span></span>
     &raquo; 
    <span class="title">Magicinfo</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Lich::Util::Magicinfo
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/magic-info.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Handles magic spell information display and management Tracks active spells, their durations, and various magical effects</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#announce-class_method" title="announce (class method)">.<strong>announce</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Announces current active spells and their effects.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#bonus-class_method" title="bonus (class method)">.<strong>bonus</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Toggles display of spell bonuses in the active spell list.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#circle-class_method" title="circle (class method)">.<strong>circle</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Toggles display of spell circle labels in the active spell list.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear-class_method" title="clear (class method)">.<strong>clear</strong>(rd)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Clears active spells from the tracking list.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#deprecated-class_method" title="deprecated (class method)">.<strong>deprecated</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Handles deprecated command functionality.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#gift-class_method" title="gift (class method)">.<strong>gift</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Toggles display of Gift of Lumnis information in spell list.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#help-class_method" title="help (class method)">.<strong>help</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays help information about available magic commands.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#messages-class_method" title="messages (class method)">.<strong>messages</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Toggles display of spell duration messages after casting Note: Currently placeholder functionality.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#request-class_method" title="request (class method)">.<strong>request</strong>(type = &#39;announce&#39;)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Processes magic-related commands and routes them to appropriate handlers.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set-class_method" title="set (class method)">.<strong>set</strong>(ra)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the duration for a specific spell.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="announce-class_method">
  
    .<strong>announce</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Displays comprehensive information including:</p>
<ul><li>
<p>Active spells with durations</p>
</li><li>
<p>Spell bonuses (if enabled)</p>
</li><li>
<p>Total combined effects</p>
</li><li>
<p>Gift of Lumnis info (if enabled)</p>
</li></ul>
</div>
  </div>

<p class="note returns_void">This method returns an undefined value.</p>
<p>Announces current active spells and their effects</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="" title="Lich::Util::Magicinfo (module)">Magicinfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_announce'>announce</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/magic-info.rb', line 225</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_announce'>announce</span>
  <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='kw'>if</span> <span class='const'>Spell</span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\r\n(no active spells)\r\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_lastcircle'>lastcircle</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='const'>Spell</span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span><span class='period'>.</span><span class='id identifier rubyid_compact!'>compact!</span>
    <span class='id identifier rubyid_total_boltAS'>total_boltAS</span><span class='comma'>,</span> <span class='id identifier rubyid_total_physicalAS'>total_physicalAS</span><span class='comma'>,</span> <span class='id identifier rubyid_total_boltDS'>total_boltDS</span><span class='comma'>,</span> <span class='id identifier rubyid_total_physicalDS'>total_physicalDS</span><span class='comma'>,</span> <span class='id identifier rubyid_total_elementalCS'>total_elementalCS</span><span class='comma'>,</span> <span class='id identifier rubyid_total_mentalCS'>total_mentalCS</span><span class='comma'>,</span> <span class='id identifier rubyid_total_spiritCS'>total_spiritCS</span><span class='comma'>,</span> <span class='id identifier rubyid_total_sorcererCS'>total_sorcererCS</span><span class='comma'>,</span> <span class='id identifier rubyid_total_elementalTD'>total_elementalTD</span><span class='comma'>,</span> <span class='id identifier rubyid_total_mentalTD'>total_mentalTD</span><span class='comma'>,</span> <span class='id identifier rubyid_total_spiritTD'>total_spiritTD</span><span class='comma'>,</span> <span class='id identifier rubyid_total_sorcererTD'>total_sorcererTD</span><span class='comma'>,</span> <span class='id identifier rubyid_total_strength'>total_strength</span><span class='comma'>,</span> <span class='id identifier rubyid_total_dodging'>total_dodging</span><span class='comma'>,</span> <span class='id identifier rubyid_total_combatmaneuvers'>total_combatmaneuvers</span><span class='comma'>,</span> <span class='id identifier rubyid_total_damagefactor'>total_damagefactor</span><span class='comma'>,</span> <span class='id identifier rubyid_total_block'>total_block</span><span class='comma'>,</span> <span class='id identifier rubyid_total_constitution'>total_constitution</span><span class='comma'>,</span> <span class='id identifier rubyid_total_health'>total_health</span><span class='comma'>,</span> <span class='id identifier rubyid_total_uaf'>total_uaf</span><span class='comma'>,</span> <span class='id identifier rubyid_total_asg'>total_asg</span><span class='comma'>,</span> <span class='id identifier rubyid_total_fof_offset'>total_fof_offset</span> <span class='op'>=</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span>
    <span class='const'>Spell</span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span><span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_spell'>spell</span><span class='op'>|</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_num'>num</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_spell'>spell</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='ivar'>@circle_state</span> <span class='kw'>and</span> <span class='lparen'>(</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_circle'>circle</span> <span class='op'>!=</span> <span class='id identifier rubyid_lastcircle'>lastcircle</span><span class='rparen'>)</span> <span class='kw'>then</span> <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\r\n- </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_circlename'>circlename</span><span class='embexpr_end'>}</span><span class='tstring_content'>:\r\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>end</span>
      <span class='id identifier rubyid_bonus_string'>bonus_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> - </span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>if</span> <span class='ivar'>@bonus_state</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_bolt_as'>bolt_as</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_bolt_as'>bolt_as</span><span class='embexpr_end'>}</span><span class='tstring_content'> bAS, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_boltAS'>total_boltAS</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_bolt_as'>bolt_as</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_physical_as'>physical_as</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_physical_as'>physical_as</span><span class='embexpr_end'>}</span><span class='tstring_content'> pAS, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_physicalAS'>total_physicalAS</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_physical_as'>physical_as</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_bolt_ds'>bolt_ds</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_bolt_ds'>bolt_ds</span><span class='embexpr_end'>}</span><span class='tstring_content'> bDS, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_boltDS'>total_boltDS</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_bolt_ds'>bolt_ds</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_physical_ds'>physical_ds</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_physical_ds'>physical_ds</span><span class='embexpr_end'>}</span><span class='tstring_content'> pDS, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_physicalDS'>total_physicalDS</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_physical_ds'>physical_ds</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_elemental_cs'>elemental_cs</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_elemental_cs'>elemental_cs</span><span class='embexpr_end'>}</span><span class='tstring_content'> elemCS, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_elementalCS'>total_elementalCS</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_elemental_cs'>elemental_cs</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_spirit_cs'>spirit_cs</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_spirit_cs'>spirit_cs</span><span class='embexpr_end'>}</span><span class='tstring_content'> spirCS, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_spiritCS'>total_spiritCS</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_spirit_cs'>spirit_cs</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_sorcerer_cs'>sorcerer_cs</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_sorcerer_cs'>sorcerer_cs</span><span class='embexpr_end'>}</span><span class='tstring_content'> sorcCS, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_sorcererCS'>total_sorcererCS</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_sorcerer_cs'>sorcerer_cs</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_elemental_td'>elemental_td</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_elemental_td'>elemental_td</span><span class='embexpr_end'>}</span><span class='tstring_content'> elemTD, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_elementalTD'>total_elementalTD</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_elemental_td'>elemental_td</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_mental_td'>mental_td</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_mental_td'>mental_td</span><span class='embexpr_end'>}</span><span class='tstring_content'> mentTD, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_mentalTD'>total_mentalTD</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_mental_td'>mental_td</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_spirit_td'>spirit_td</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_spirit_td'>spirit_td</span><span class='embexpr_end'>}</span><span class='tstring_content'> spirTD, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_spiritTD'>total_spiritTD</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_spirit_td'>spirit_td</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_sorcerer_td'>sorcerer_td</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_sorcerer_td'>sorcerer_td</span><span class='embexpr_end'>}</span><span class='tstring_content'> sorcTD, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_sorcererTD'>total_sorcererTD</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_sorcerer_td'>sorcerer_td</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_strength'>strength</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_strength'>strength</span><span class='embexpr_end'>}</span><span class='tstring_content'> str, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_strength'>total_strength</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_strength'>strength</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_dodging'>dodging</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_dodging'>dodging</span><span class='embexpr_end'>}</span><span class='tstring_content'> dodge, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_dodging'>total_dodging</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_dodging'>dodging</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_combatmaneuvers'>combatmaneuvers</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_combatmaneuvers'>combatmaneuvers</span><span class='embexpr_end'>}</span><span class='tstring_content'> CM, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_combatmaneuvers'>total_combatmaneuvers</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_combatmaneuvers'>combatmaneuvers</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_damagefactor'>damagefactor</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_damagefactor'>damagefactor</span><span class='embexpr_end'>}</span><span class='tstring_content'>% DF, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_damagefactor'>total_damagefactor</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_damagefactor'>damagefactor</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_block'>block</span><span class='embexpr_end'>}</span><span class='tstring_content'>% block, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_block'>total_block</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_constitution'>constitution</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_constitution'>constitution</span><span class='embexpr_end'>}</span><span class='tstring_content'> con, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_constitution'>total_constitution</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_constitution'>constitution</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_health'>health</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_health'>health</span><span class='embexpr_end'>}</span><span class='tstring_content'> health, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_health'>total_health</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_health'>health</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_unarmed_af'>unarmed_af</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_unarmed_af'>unarmed_af</span><span class='embexpr_end'>}</span><span class='tstring_content'> UAF, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_uaf'>total_uaf</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_unarmed_af'>unarmed_af</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_asg'>asg</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>!=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_asg'>asg</span><span class='embexpr_end'>}</span><span class='tstring_content'> AsG, </span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_total_asg'>total_asg</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_asg'>asg</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='kw'>end</span>
        <span class='kw'>begin</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_fof_offset'>fof_offset</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>!=</span> <span class='int'>0</span>
            <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_fof_offset'>fof_offset</span><span class='embexpr_end'>}</span><span class='tstring_content'> FoF offset, </span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_total_fof_offset'>total_fof_offset</span> <span class='op'>+=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_fof_offset'>fof_offset</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
          <span class='kw'>end</span>
        <span class='kw'>rescue</span>
          <span class='kw'>nil</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span><span class='lparen'>(</span><span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  %04s:  %-023s - %s%s\r\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_num'>num</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_remaining'>remaining</span><span class='comma'>,</span> <span class='id identifier rubyid_bonus_string'>bonus_string</span><span class='period'>.</span><span class='id identifier rubyid_chop'>chop</span><span class='period'>.</span><span class='id identifier rubyid_chop'>chop</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_lastcircle'>lastcircle</span> <span class='op'>=</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_circle'>circle</span>
    <span class='rbrace'>}</span>
    <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\r\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='ivar'>@bonus_state</span>
      <span class='id identifier rubyid_total_offense_string'>total_offense_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_total_defense_string'>total_defense_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_total_stat_string'>total_stat_string</span>    <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_total_skill_string'>total_skill_string</span>   <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>

      <span class='id identifier rubyid_total_offense_string'>total_offense_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_offense_string'>total_offense_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_boltAS'>total_boltAS</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> bAS, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_boltAS'>total_boltAS</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_offense_string'>total_offense_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_offense_string'>total_offense_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_physicalAS'>total_physicalAS</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> pAS, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_physicalAS'>total_physicalAS</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_offense_string'>total_offense_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_offense_string'>total_offense_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_elementalCS'>total_elementalCS</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> elemCS, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_elementalCS'>total_elementalCS</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_offense_string'>total_offense_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_offense_string'>total_offense_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_mentalCS'>total_mentalCS</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> mentCS, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_mentalCS'>total_mentalCS</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_offense_string'>total_offense_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_offense_string'>total_offense_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_spiritCS'>total_spiritCS</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> spirCS, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_spiritCS'>total_spiritCS</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_offense_string'>total_offense_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_offense_string'>total_offense_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_sorcererCS'>total_sorcererCS</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> sorcCS, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_sorcererCS'>total_sorcererCS</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_offense_string'>total_offense_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_offense_string'>total_offense_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_damagefactor'>total_damagefactor</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>% DF </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_damagefactor'>total_damagefactor</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_offense_string'>total_offense_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_offense_string'>total_offense_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_uaf'>total_uaf</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> UAF, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_uaf'>total_uaf</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_offense_string'>total_offense_string</span><span class='period'>.</span><span class='id identifier rubyid_chop!'>chop!</span><span class='period'>.</span><span class='id identifier rubyid_chop!'>chop!</span>

      <span class='id identifier rubyid_total_defense_string'>total_defense_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_defense_string'>total_defense_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_boltDS'>total_boltDS</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> bDS, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_boltDS'>total_boltDS</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_defense_string'>total_defense_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_defense_string'>total_defense_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_physicalDS'>total_physicalDS</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> pDS, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_physicalDS'>total_physicalDS</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_defense_string'>total_defense_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_defense_string'>total_defense_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_elementalTD'>total_elementalTD</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> elemTD, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_elementalTD'>total_elementalTD</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_defense_string'>total_defense_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_defense_string'>total_defense_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_mentalTD'>total_mentalTD</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> mentTD, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_mentalTD'>total_mentalTD</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_defense_string'>total_defense_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_defense_string'>total_defense_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_spiritTD'>total_spiritTD</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> spirTD, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_spiritTD'>total_spiritTD</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_defense_string'>total_defense_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_defense_string'>total_defense_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_sorcererTD'>total_sorcererTD</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> sorcTD, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_sorcererTD'>total_sorcererTD</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_defense_string'>total_defense_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_defense_string'>total_defense_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_block'>total_block</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>% block, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_block'>total_block</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_defense_string'>total_defense_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_defense_string'>total_defense_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_asg'>total_asg</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> AsG, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_asg'>total_asg</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_defense_string'>total_defense_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_defense_string'>total_defense_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_fof_offset'>total_fof_offset</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> FoF offset, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_fof_offset'>total_fof_offset</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_defense_string'>total_defense_string</span><span class='period'>.</span><span class='id identifier rubyid_chop!'>chop!</span><span class='period'>.</span><span class='id identifier rubyid_chop!'>chop!</span>

      <span class='id identifier rubyid_total_stat_string'>total_stat_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_stat_string'>total_stat_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_strength'>total_strength</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> str, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_strength'>total_strength</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_stat_string'>total_stat_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_stat_string'>total_stat_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_constitution'>total_constitution</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> con, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_constitution'>total_constitution</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_stat_string'>total_stat_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_stat_string'>total_stat_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_health'>total_health</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> health, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_health'>total_health</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_stat_string'>total_stat_string</span><span class='period'>.</span><span class='id identifier rubyid_chop!'>chop!</span><span class='period'>.</span><span class='id identifier rubyid_chop!'>chop!</span>

      <span class='id identifier rubyid_total_skill_string'>total_skill_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_skill_string'>total_skill_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_dodging'>total_dodging</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> dodge, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_dodging'>total_dodging</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_skill_string'>total_skill_string</span> <span class='op'>=</span> <span class='id identifier rubyid_total_skill_string'>total_skill_string</span> <span class='op'>+</span> <span class='id identifier rubyid_total_combatmaneuvers'>total_combatmaneuvers</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> CM, </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total_combatmaneuvers'>total_combatmaneuvers</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_total_skill_string'>total_skill_string</span><span class='period'>.</span><span class='id identifier rubyid_chop!'>chop!</span><span class='period'>.</span><span class='id identifier rubyid_chop!'>chop!</span>

      <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>- Totals:\r\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  Offense: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_total_offense_string'>total_offense_string</span><span class='embexpr_end'>}</span><span class='tstring_content'>\r\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_total_offense_string'>total_offense_string</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  Defense: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_total_defense_string'>total_defense_string</span><span class='embexpr_end'>}</span><span class='tstring_content'>\r\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_total_defense_string'>total_defense_string</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    Stats: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_total_stat_string'>total_stat_string</span><span class='embexpr_end'>}</span><span class='tstring_content'>\r\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_total_stat_string'>total_stat_string</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>   Skills: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_total_skill_string'>total_skill_string</span><span class='embexpr_end'>}</span><span class='tstring_content'>\r\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_total_skill_string'>total_skill_string</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\r\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_respond'>respond</span> <span class='id identifier rubyid_output'>output</span>
  <span class='kw'>if</span> <span class='ivar'>@gift_state</span>
    <span class='id identifier rubyid_string_to_send'>string_to_send</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lumnis info</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_do_client'>do_client</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_string_to_send'>string_to_send</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="bonus-class_method">
  
    .<strong>bonus</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Toggles display of spell bonuses in the active spell list</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="" title="Lich::Util::Magicinfo (module)">Magicinfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_bonus'>bonus</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


147
148
149
150
151
152
153
154
155
156
157</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/magic-info.rb', line 147</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_bonus'>bonus</span>
  <span class='kw'>if</span> <span class='ivar'>@bonus_state</span> <span class='op'>==</span> <span class='kw'>false</span>
    <span class='const'><span class='object_link'><a href="../../Lich.html" title="Lich (module)">Lich</a></span></span><span class='period'>.</span><span class='id identifier rubyid_magicinfo_bonus'>magicinfo_bonus</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='ivar'>@bonus_state</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Spell bonuses will be displayed in the active spell list.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='const'><span class='object_link'><a href="../../Lich.html" title="Lich (module)">Lich</a></span></span><span class='period'>.</span><span class='id identifier rubyid_magicinfo_bonus'>magicinfo_bonus</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='ivar'>@bonus_state</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Spell bonuses will not be displayed in the active spell list.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="circle-class_method">
  
    .<strong>circle</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Toggles display of spell circle labels in the active spell list</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="" title="Lich::Util::Magicinfo (module)">Magicinfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_circle'>circle</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


113
114
115
116
117
118
119
120
121
122
123</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/magic-info.rb', line 113</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_circle'>circle</span>
  <span class='kw'>if</span> <span class='ivar'>@circle_state</span> <span class='op'>==</span> <span class='kw'>false</span>
    <span class='const'><span class='object_link'><a href="../../Lich.html" title="Lich (module)">Lich</a></span></span><span class='period'>.</span><span class='id identifier rubyid_magicinfo_circle'>magicinfo_circle</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='ivar'>@circle_state</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Spell circle labels will be displayed in the active spell list.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='const'><span class='object_link'><a href="../../Lich.html" title="Lich (module)">Lich</a></span></span><span class='period'>.</span><span class='id identifier rubyid_magicinfo_circle'>magicinfo_circle</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='ivar'>@circle_state</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Spell circle labels will not be displayed in the active spell list.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clear-class_method">
  
    .<strong>clear</strong>(rd)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Clears active spells from the tracking list</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="" title="Lich::Util::Magicinfo (module)">Magicinfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='rparen'>)</span> <span class='comment'># Clears all spells
</span><span class='const'><span class='object_link'><a href="" title="Lich::Util::Magicinfo (module)">Magicinfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>101</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'># Clears spell #101</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>rd</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Specific spell to clear, or nil to clear all</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/magic-info.rb', line 85</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span><span class='lparen'>(</span><span class='id identifier rubyid_rd'>rd</span><span class='rparen'>)</span>
  <span class='comment'># requested_drop = rd
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_rd'>rd</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>or</span> <span class='id identifier rubyid_rd'>rd</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='kw'>while</span> <span class='lparen'>(</span><span class='id identifier rubyid_spell'>spell</span> <span class='op'>=</span> <span class='const'>Spell</span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_putdown'>putdown</span>
    <span class='kw'>end</span>
    <span class='const'>Spell</span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
    <span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Active spell list cleared.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_rd'>rd</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>==</span> <span class='int'>0</span>
      <span class='id identifier rubyid_spell'>spell</span> <span class='op'>=</span> <span class='const'>Spell</span><span class='lbracket'>[</span><span class='id identifier rubyid_rd'>rd</span><span class='rbracket'>]</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_spell'>spell</span> <span class='op'>=</span> <span class='const'>Spell</span><span class='lbracket'>[</span><span class='id identifier rubyid_rd'>rd</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Could not identify spell </span><span class='embexpr_beg'>#{</span><span class='backref'>$1</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_putdown'>putdown</span>
      <span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='embexpr_end'>}</span><span class='tstring_content'> has been removed from the list.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="deprecated-class_method">
  
    .<strong>deprecated</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Handles deprecated command functionality</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="" title="Lich::Util::Magicinfo (module)">Magicinfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_deprecated'>deprecated</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


181
182
183</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/magic-info.rb', line 181</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_deprecated'>deprecated</span>
  <span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>this setting is no longer used</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="gift-class_method">
  
    .<strong>gift</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Toggles display of Gift of Lumnis information in spell list</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="" title="Lich::Util::Magicinfo (module)">Magicinfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_gift'>gift</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


164
165
166
167
168
169
170
171
172
173
174</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/magic-info.rb', line 164</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_gift'>gift</span>
  <span class='kw'>if</span> <span class='ivar'>@gift_state</span> <span class='op'>==</span> <span class='kw'>false</span>
    <span class='const'><span class='object_link'><a href="../../Lich.html" title="Lich (module)">Lich</a></span></span><span class='period'>.</span><span class='id identifier rubyid_magicinfo_gift'>magicinfo_gift</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='ivar'>@gift_state</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Gift of Lumnis will be displayed in the active spell list.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='const'><span class='object_link'><a href="../../Lich.html" title="Lich (module)">Lich</a></span></span><span class='period'>.</span><span class='id identifier rubyid_magicinfo_gift'>magicinfo_gift</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='ivar'>@gift_state</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Gift of Lumnis will not be displayed in the active spell list.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="help-class_method">
  
    .<strong>help</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Displays help information about available magic commands</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="" title="Lich::Util::Magicinfo (module)">Magicinfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_help'>help</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


64
65
66
67
68
69
70
71
72
73
74
75
76</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/magic-info.rb', line 64</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_help'>help</span>
  <span class='id identifier rubyid_respond'>respond</span>
  <span class='id identifier rubyid_respond'>respond</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Magic usage:</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_respond'>respond</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>   ;magic                     - Shows your active spells and their durations.</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_respond'>respond</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>   ;magic set [spell#] [mins] - Sets a spell&#39;s duration.</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_respond'>respond</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>   ;magic clear [spell]       - Remove a single spell.</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_respond'>respond</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>   ;magic clear               - Clears the whole list.</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_respond'>respond</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>   ;magic circles             - Toggles the display of spell circle labels with the active spell list.</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_respond'>respond</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>   ;magic bonuses             - Toggles the display of spell bonuses with the active spell list.</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_respond'>respond</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>   ;magic gift                - Toggles the display of Gift of Lumnis information with the active spell list.</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_respond'>respond</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>   ;magic messages            - Toggles the display of a duration message after each cast.</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_respond'>respond</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="messages-class_method">
  
    .<strong>messages</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Toggles display of spell duration messages after casting Note: Currently placeholder functionality</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="" title="Lich::Util::Magicinfo (module)">Magicinfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_messages'>messages</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


131
132
133
134
135
136
137
138
139
140</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/magic-info.rb', line 131</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_messages'>messages</span>
  <span class='comment'># if $infomon_values[&#39;show_messages&#39;] == false
</span>  <span class='comment'>#   $infomon_values[&#39;show_messages&#39;] = true
</span>  <span class='comment'>#   respond(&#39;Showing spell duration messages after each cast is now on.&#39;)
</span>  <span class='comment'># else
</span>  <span class='comment'>#   $infomon_values[&#39;show_messages&#39;] = false
</span>  <span class='comment'>#   respond(&#39;Showing spell duration messages after each cast is now off.&#39;)
</span>  <span class='comment'># end
</span>  <span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This command may be coming soon!</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="request-class_method">
  
    .<strong>request</strong>(type = &#39;announce&#39;)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Processes magic-related commands and routes them to appropriate handlers</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="" title="Lich::Util::Magicinfo (module)">Magicinfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>help</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='const'><span class='object_link'><a href="" title="Lich::Util::Magicinfo (module)">Magicinfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>announce</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> 
<span class='const'><span class='object_link'><a href="" title="Lich::Util::Magicinfo (module)">Magicinfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>clear 101</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>type</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;announce&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The command type to process (‘help’, ‘announce’, ‘clear’, etc)</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/magic-info.rb', line 24</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>announce</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_type'>type</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>help</span><span class='regexp_end'>/</span></span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_help'>help</span> <span class='comment'># Ok, that&#39;s just wrong.
</span>  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>announce</span><span class='regexp_end'>/</span></span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_announce'>announce</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>clear(?:\s+(.*)|$)</span><span class='regexp_end'>/</span></span>
    <span class='kw'>if</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_dump'>dump</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span><span class='lparen'>(</span><span class='id identifier rubyid_dump'>dump</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>circle</span><span class='regexp_end'>/</span></span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_circle'>circle</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>messages</span><span class='regexp_end'>/</span></span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_messages'>messages</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>bonus</span><span class='regexp_end'>/</span></span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_bonus'>bonus</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>gift</span><span class='regexp_end'>/</span></span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_gift'>gift</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>set (.*)</span><span class='regexp_end'>/</span></span>
    <span class='kw'>if</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_set'>set</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_pump'>pump</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_set'>set</span><span class='lparen'>(</span><span class='id identifier rubyid_pump'>pump</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>update|save|load</span><span class='regexp_end'>/</span></span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_deprecated'>deprecated</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid__respond'>_respond</span><span class='semicolon'>;</span> <span class='id identifier rubyid__respond'>_respond</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Magic error! Type &#39;;magic help&#39; for usage information.</span><span class='tstring_end'>&quot;</span></span><span class='semicolon'>;</span> <span class='id identifier rubyid__respond'>_respond</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set-class_method">
  
    .<strong>set</strong>(ra)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Requires spell number rather than name for accuracy</p>
</div>
  </div>

<p class="note returns_void">This method returns an undefined value.</p>
<p>Sets the duration for a specific spell</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="" title="Lich::Util::Magicinfo (module)">Magicinfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_set'>set</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>101 30</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'># Sets spell 101 to 30 minutes duration</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ra</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Request string containing spell number and duration in minutes</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RuntimeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>When spell number cannot be found</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/magic-info.rb', line 193</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_set'>set</span><span class='lparen'>(</span><span class='id identifier rubyid_ra'>ra</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_request_actions'>request_actions</span> <span class='op'>=</span> <span class='id identifier rubyid_ra'>ra</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_request_actions'>request_actions</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Magic error! Type &#39;;magic help&#39; for usage information.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_set_request_elements'>set_request_elements</span> <span class='op'>=</span> <span class='id identifier rubyid_request_actions'>request_actions</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_set_request_elements'>set_request_elements</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>==</span> <span class='int'>0</span>
      <span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Use the spell number for accuracy. Type &#39;;magic help&#39; for usage information.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_spell'>spell</span> <span class='op'>=</span> <span class='const'>Spell</span><span class='lbracket'>[</span><span class='id identifier rubyid_set_request_elements'>set_request_elements</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Magic error! Requested spell cannot be found.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_putup'>putup</span>
      <span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_timeleft'>timeleft</span> <span class='op'>=</span> <span class='id identifier rubyid_set_request_elements'>set_request_elements</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
      <span class='id identifier rubyid_respond'>respond</span> <span class='id identifier rubyid_set_request_elements'>set_request_elements</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
      <span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Spell &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; is now set as having </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spell'>spell</span><span class='period'>.</span><span class='id identifier rubyid_timeleft'>timeleft</span><span class='embexpr_end'>}</span><span class='tstring_content'> minutes left.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed May 14 19:47:37 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.3.4).
</div>

    </div>
  </body>
</html>